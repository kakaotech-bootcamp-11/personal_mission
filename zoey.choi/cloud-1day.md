## 클라우드 서비스가 없는 시절에는 어떻게 운영했을까?

`회사에서 직접 서버 구축`, `서버실이 따로 있을 것`, `on-premise 방식`

### 서버 구축 및 증설을 모두 수동으로

- 운영할 소프트웨어의 CPU, Memory, 저장용량을 예측하여 서버 구매
    - 예측한 것보다 더 많이 구매를 했을 것임
- 서버실에 서버를 넣어, OS 설치부터 소프트웨어 설치까지 직접 진행
- 서버 간의 네트워크 세팅을 iptable 등을 이용해 수동 세팅

### 만약 이런 상황에서 아래와 같은 일들이 벌어진다며?

- 서버가 부족해서 빠르게 증축해야하는 상황
- 서버가 너무 남아서 리소스 낭비인 상황
- 서버실이 갑자기 정전이 된다면?
- 서버실의 물리적인 보안은 어떻게 관리할까?
- 서버에 있는 소프트웨어를 업데이트를 애햐한다면?

## 클라우드 엔지니어들이 하는 일들

### 서비스 구축 및 자동화

- 서비스를 구축하고 그 과정을 코드화(Infrastructure as Code, IaC)하여 관리
- Ansible, Terraform을 이용한 구축 프로세그를 자동화
- github Actions, Jenkins 등을 이용한 배포 자동화
    - 슬랙과 같은 툴로 알림 전송

### 데이터 운영 및 백업

- 데이터베이스 구축 및 관리
- 제품에서 저장하는 로그, DB데이터, 파일시스템 데이터, Object Storage(예: AWS S3) 데이터 등을 관리
- 모든 데이터에 대해 분실 가능성을 두고 백업 및 복구 관리

### 전체 보안

- 클라우드 보안 네트워크 보안, 시스템 보안, 데이터 보안, 애플리케이션 보안 등등 전체 보안을 관리
    - ssh 접속할 때, 물리적인 트래픽 방어
- 국내 개인정보처리 방침, 유럽 GDPR과 같은 개인정보처리를 이해하고 시스템 구성

### 서비스 모니터링 및 장애 대응

- 서비스 리소스를 모니터링하고 리소스 이슈 시 알람 설정 진행
    - 모니터링을 24시간 보는 것은 시간 낭비
- 서비스 장애 상황을 3단계 (예: Warning / High / Disaster)와 같이 구별하여 대응
    - high로 알림을 맞춰놓고, 서버를 늘림
- 장애 발생 시 프로세스화 된 장애 대응 프로세스 대음

### 클라우드 비용 관리

- 클라우드 비용을 월별로 관리
- 갑자기 사용하지 않은 리소스에 대해 비용이 사용된 경우, 알람이 오도록 처리하여 대응
- 매번 비용 다이어트를 고려

### AI리소스 관리

- GPU 클러스터나 관련 온프레미스 서버 관리
- Private LLM 관리
    - LLM : 거대 언어 모델, gpt, llama
- Training 관련 / Inference 관련 / RAG 관련 등의 다양한 리소스 관리

### 클라우드 도메인 직군

- 클라우드 네이티브 팀
- SRE (Site Reliablility Engineering) 팀
- 클라우드 보안팀
- 데이터 관리팀
- 서비스 인프라 팀
- 백엔드 엔지니어
- AI 엔지니어

## 프로젝트 시, 클라우드 엔지니어로서 경험해보면 좋은 일들

### 서비스 운영

- 애플리케이션을 서버에 올려보고 도메인을 붙어 서비스 해 본 경험
- 서비스 리소스를 모니터링해서 스케일인/스케일아웃 해보기
- 개인정보처리방침과 이용약관을 이해하고 회원가입을 붙여보기


### 데이터 관리

- 저장되는 데이터가 손실되었을 때 복구 가능하도록 백업 자동화 해보기
- 데이터베이스 관리해보기


### 애플리케이션 보안

- API 작성 시, Header를 이용하여 Token 기반으로 API가 동작하도록 만들어보기
    - 세션, Token
- 클라이언트에서 데이터를 불러올 때, API 파라미터를 조작하여 다른 계정의 데이터를 가져올 수 없게 만들기
- 주요 3rd Party Key들을 보관할 때, 코드에 하드코딩하지 않고 밖으로 빼서 관리하거나 `Vault`를 통해 관리해보기
    - key를 관리하는 방법 → config 파일에 따로 두기, 절대 깃허브에 올리지 말기


## 모든 서비스는 쿠버네티스를 기반으로 운영해야할까?

`컨테이너 오케스트레이션 툴`

<aside>
💡 쿠버네티스란, 컨테이너화된 애플리케이션의 자동 Deploy, Scaling 등을 제공하는 관리 시스템

</aside>

- 쿠버네티스를 운영하기 위한 서버가 따로 필요함
    - 고급화된 시스템

### 우리가 쿠버네티스 시스템을 이용한다고 했을 때의 기대점

- 전체 시스템 모니터링이 편하여 서비스 관리가 편할 것 같다
- 서비스 운영 시 스케일인/아웃이 자유로워 비용 관리가 편할 것 같다
- 스케일 아웃이 빨라 갑자기 큰 트래픽이 오더라도 빠르게 대응이 가능할 것 같다
- 서비스 배포가 매우 편할 것 같다
- 서비스 관리를 모두 코드로 운영 가능하여 편할 것 같다

`BUT, 비용이 많이 듦 + 죽어서는 안됨`

### 정말 쿠버네티스가 모든 상황에 대해 최적의 솔루션일까?

- 만약, 서비스 유저 10명쯤 되는데 쿠버네티스가 필요할까?
- 만약, 사내 내부 시스템인데 쿠버네티스가 필요할까?
- 만약 제품이 컨테이너로 운영해 본 적이 없을 때 쿠버네티스로 바로 잘 운영할 수 있을까?

## 안정성 vs 효율성

<aside>
💡 서버 하나에 어플리케이션이 떠 있습니다. 서버가 죽으면 어플리케이션도 죽습니다. 서버를 재시작 시키고 어플리케이션을 키는데 2분 정도 걸립니다.

</aside>

### Q1. 서버를 반드시 이중화 해야할까요? (서버를 2대 이상 띄움, 로드 밸런서를 이용해서 서버가 하나 죽더라도 다른 서버를 이용하여 안정성이 높아짐, but, 효율성은 떨어짐)

정답은 없지만, 규칙은 있다.

- 안정성을 견고히 할수록 클라우드 비용은 늘어납니다.
- 만약, 서비스가 죽어도 비즈니스에 큰 타격이 없는 사내 서비스라면 이중화 비용이 아까울 수도 있습니다.
- 관리자는 서버가 죽었을 때, 이걸 수동으로 키는 여러분의 인건비와 이중화 비용을 저울질 할 수도 있습니다.
- 저울질 결과, 이중화를 하거나 빨리 복구하는 스크립트를 만들게 할 수도 있습니다.
- 정답은 없으니, 가장 좋은 방법을 인프라 상황과 제품 상황에 맞게 만들어야 합니다.

제품의 이슈

- 관리자가 이중화를 선택했더라도, 어플리케이션이 받쳐줘야 합니다.
- 만약, 어플리케이션이 비즈니스 로직을 처리하는데 중요한 데이터를 메모리에 캐싱하여 저장하고 있다면?
- (이중화된 경우)어플리케이션1 메모리에 저장된 중요한 데이터는 어플리케이션2에서는 가져올 수가 없는 경우
- 결국, 인프라 아키텍처는 어플리케이션에 맞춰 운영할 수 밖에 없습니다.

<aside>
💡 서버가 한 대 죽더라도, 다른 한 대가 있어 서비스는 유지됩니다. 다만, 스토리지는 1대입니다.

</aside>

### Q2. 스토리지 서버를 반드시 이중화 해야 할까요?

### 99.9% 문제 없어도 0.1% 안되면 큰일나는 서비스들

- 생존과 관련된 서비스들
    - 병원에서 사용하는 서비스들
- 100% 실시간이 되어야 하는 서비스
    - 코딩테스트, 메신저 서비스(카톡)
- 오류가 0에 가까워야 하는 서비스
    - nasa에서 운영하는 우주선 관련 서비스들

- 흔히 개발자가 생각하는 “좋은” 어플리케이션
    - 항상 최신 버전을 유지하고 있는 어플리케이션
    - 항상 최신 트렌드를 따르고 있는 어플리케이션
- 사실 운영하기 “좋은” 어플리케이션
    - 유지 보수가 편한 어플리케이션
    - 트렌드는 아니더라도 잘 죽지 않는 어플리케이션

무조건 `최신 버전`이 `안정성을` 책임질 수 있을까?

항상 `최신 트렌드`가 `안정성을` 책임질 수 있을까?

항상 `최신 트렌드`가 `서비스 운영`하기에 유리한게 맞을까?

즉, 서비스 운영 측면에서 어플리케이션의 상황이 인프라 운영과 밀접한 관계를 맺음

## 그래서 어떻게 해야하는 걸까요?

### 비즈니스 상황을 면밀히 파악 필요

- 내가 운영하는 서비스가 얼마나 안정성을 중시하는지 확인
- 가능한 서비스 안정성을 우선시 하되, 클라우드 비용을 최소화하려는 노력 필요
- 서비스 매출 vs 서비스 신뢰도를 저울질할 필요 있음

### 제품 상황을 면밀히 파악 필요

- 내가 운영하는 제품이 컨테이너 기반으로 운영된 적이 있는지
- 이중화가 안되어 있는 경우, 이중화를 해도 문제 없을지
- 이중화 시에 제품이 저장하는 데이터는 문제가 없을 시

### 본인의 팀 상황을 면밀히 파악 필요

- 혼자 내가 혼자이거나 소수인 팀이라면?
- 여러 파트가 각자의 역할을 갖고 움직이고 있다면?
- 서비스 운영시 자동화를 얼마나 하고 있는지?

## ⇒ 커뮤니케이션 필요

## 기업에서는 클라우드 엔지니어를 언제 필요로 할까?

### 초기 스타트업, 소규모 중소기업

- 서비스가 커지고 있는데, 서비스가 안정적으로 운영되었으면 좋겠다.

### 클라우드 팀이 운영되고 있는 기업

- 사업에서의 요구사항을 이해해서 서비스 구축을 해 본 사람이 더 있었으면 좋겠다
- 인프라 운영 시 제품에 변경사항을 제품 개발자에게 잘 설명할 줄 아는 사람이 있었으면 좋겠다
- 제품의 소프트웨어 스택을 이해하고 인프라 상황을 맞춰본 사람이 더 있었으면 좋겠다

→ 사업과 제품을 이해한 커뮤니케이션에 능한 클라우드 인재가 필요